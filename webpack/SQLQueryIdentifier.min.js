!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("SQLQueryIdentifier",[],t):"object"==typeof exports?exports.SQLQueryIdentifier=t():e.SQLQueryIdentifier=t()}(self,(()=>(()=>{"use strict";var e={996:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DIALECTS=void 0,t.DIALECTS=["mssql","sqlite","mysql","oracle","psql","bigquery","generic"]},337:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultParamTypesFor=t.parse=t.EXECUTION_TYPES=void 0;const r=n(429);t.EXECUTION_TYPES={SELECT:"LISTING",INSERT:"MODIFICATION",DELETE:"MODIFICATION",UPDATE:"MODIFICATION",TRUNCATE:"MODIFICATION",CREATE_DATABASE:"MODIFICATION",CREATE_SCHEMA:"MODIFICATION",CREATE_TABLE:"MODIFICATION",CREATE_VIEW:"MODIFICATION",CREATE_TRIGGER:"MODIFICATION",CREATE_FUNCTION:"MODIFICATION",CREATE_INDEX:"MODIFICATION",CREATE_PROCEDURE:"MODIFICATION",SHOW_BINARY:"LISTING",SHOW_BINLOG:"LISTING",SHOW_CHARACTER:"LISTING",SHOW_COLLATION:"LISTING",SHOW_CREATE:"LISTING",SHOW_ENGINE:"LISTING",SHOW_ENGINES:"LISTING",SHOW_ERRORS:"LISTING",SHOW_EVENTS:"LISTING",SHOW_FUNCTION:"LISTING",SHOW_GRANTS:"LISTING",SHOW_MASTER:"LISTING",SHOW_OPEN:"LISTING",SHOW_PLUGINS:"LISTING",SHOW_PRIVILEGES:"LISTING",SHOW_PROCEDURE:"LISTING",SHOW_PROCESSLIST:"LISTING",SHOW_PROFILE:"LISTING",SHOW_PROFILES:"LISTING",SHOW_RELAYLOG:"LISTING",SHOW_REPLICAS:"LISTING",SHOW_SLAVE:"LISTING",SHOW_REPLICA:"LISTING",SHOW_STATUS:"LISTING",SHOW_TRIGGERS:"LISTING",SHOW_VARIABLES:"LISTING",SHOW_WARNINGS:"LISTING",SHOW_DATABASES:"LISTING",SHOW_KEYS:"LISTING",SHOW_INDEX:"LISTING",SHOW_TABLE:"LISTING",SHOW_TABLES:"LISTING",SHOW_COLUMNS:"LISTING",DROP_DATABASE:"MODIFICATION",DROP_SCHEMA:"MODIFICATION",DROP_TABLE:"MODIFICATION",DROP_VIEW:"MODIFICATION",DROP_TRIGGER:"MODIFICATION",DROP_FUNCTION:"MODIFICATION",DROP_INDEX:"MODIFICATION",DROP_PROCEDURE:"MODIFICATION",ALTER_DATABASE:"MODIFICATION",ALTER_SCHEMA:"MODIFICATION",ALTER_TABLE:"MODIFICATION",ALTER_VIEW:"MODIFICATION",ALTER_TRIGGER:"MODIFICATION",ALTER_FUNCTION:"MODIFICATION",ALTER_INDEX:"MODIFICATION",ALTER_PROCEDURE:"MODIFICATION",UNKNOWN:"UNKNOWN",ANON_BLOCK:"ANON_BLOCK"};const a=["CREATE_TRIGGER","CREATE_FUNCTION","CREATE_PROCEDURE","ANON_BLOCK","UNKNOWN"],o=/^from$|^join$|^into$/i,s={generic:["BEGIN","CASE"],psql:["BEGIN","CASE","LOOP","IF"],mysql:["BEGIN","CASE","LOOP","IF"],mssql:["BEGIN","CASE"],sqlite:["BEGIN","CASE"],oracle:["DECLARE","BEGIN","CASE"],bigquery:["BEGIN","CASE","IF","LOOP","REPEAT","WHILE","FOR"]};function i(e,t){let n;do{e=u({prevState:e}),n=(0,r.scanToken)(e,t)}while("whitespace"===n.type);return n}function u({input:e,prevState:t}){if(t)return{input:t.input,position:t.position,start:t.position+1,end:t.input.length-1};if(void 0===e)throw new Error("You must define either input or prevState");return{input:e,position:-1,start:0,end:e.length-1}}function l(e,t,n){if("keyword"===e.type)switch(e.value.toUpperCase()){case"SELECT":return function(e){const t={start:-1,end:0,parameters:[],tables:[]},n=[{preCanGoToNext:()=>!1,validation:{acceptTokens:[{type:"keyword",value:"SELECT"}]},add:e=>{t.type="SELECT",t.start<0&&(t.start=e.start)},postCanGoToNext:()=>!0}];return d(t,n,e)}(n);case"CREATE":return function(e){const t={start:-1,end:0,parameters:[],tables:[]},n=[{preCanGoToNext:()=>!1,validation:{acceptTokens:[{type:"keyword",value:"CREATE"}]},add:e=>{t.start<0&&(t.start=e.start)},postCanGoToNext:()=>!0},{preCanGoToNext:()=>!1,validation:{requireBefore:["whitespace"],acceptTokens:[..."sqlite"!==e.dialect?[{type:"keyword",value:"DATABASE"},{type:"keyword",value:"SCHEMA"},{type:"keyword",value:"PROCEDURE"}]:[],{type:"keyword",value:"TABLE"},{type:"keyword",value:"VIEW"},{type:"keyword",value:"TRIGGER"},{type:"keyword",value:"FUNCTION"},{type:"keyword",value:"INDEX"}]},add:e=>{t.type=`CREATE_${e.value.toUpperCase()}`},postCanGoToNext:()=>!0}];return d(t,n,e)}(n);case"SHOW":if(["mysql","generic"].includes(n.dialect))return function(e){const t={start:-1,end:0,parameters:[],tables:[]},n=[{preCanGoToNext:()=>!1,validation:{acceptTokens:[{type:"keyword",value:"SHOW"}]},add:e=>{t.start<0&&(t.start=e.start)},postCanGoToNext:()=>!0},{preCanGoToNext:()=>!1,validation:{requireBefore:["whitespace"],acceptTokens:[{type:"keyword",value:"DATABASES"},{type:"keyword",value:"DATABASE"},{type:"keyword",value:"KEYS"},{type:"keyword",value:"INDEX"},{type:"keyword",value:"COLUMNS"},{type:"keyword",value:"TABLES"},{type:"keyword",value:"TABLE"},{type:"keyword",value:"BINARY"},{type:"keyword",value:"BINLOG"},{type:"keyword",value:"CHARACTER"},{type:"keyword",value:"COLLATION"},{type:"keyword",value:"CREATE"},{type:"keyword",value:"ENGINE"},{type:"keyword",value:"ENGINES"},{type:"keyword",value:"ERRORS"},{type:"keyword",value:"EVENTS"},{type:"keyword",value:"FUNCTION"},{type:"keyword",value:"GRANTS"},{type:"keyword",value:"MASTER"},{type:"keyword",value:"OPEN"},{type:"keyword",value:"PLUGINS"},{type:"keyword",value:"PRIVILEGES"},{type:"keyword",value:"PROCEDURE"},{type:"keyword",value:"PROCESSLIST"},{type:"keyword",value:"PROFILE"},{type:"keyword",value:"PROFILES"},{type:"keyword",value:"RELAYLOG"},{type:"keyword",value:"REPLICAS"},{type:"keyword",value:"REPLICA"},{type:"keyword",value:"SLAVE"},{type:"keyword",value:"STATUS"},{type:"keyword",value:"TRIGGERS"},{type:"keyword",value:"VARIABLES"},{type:"keyword",value:"WARNINGS"}]},add:e=>{t.type=`SHOW_${e.value.toUpperCase().replace(" ","_")}`},postCanGoToNext:()=>!0}];return d(t,n,e)}(n);break;case"DROP":return function(e){const t={start:-1,end:0,parameters:[],tables:[]},n=[{preCanGoToNext:()=>!1,validation:{acceptTokens:[{type:"keyword",value:"DROP"}]},add:e=>{t.start<0&&(t.start=e.start)},postCanGoToNext:()=>!0},{preCanGoToNext:()=>!1,validation:{requireBefore:["whitespace"],acceptTokens:[..."sqlite"!==e.dialect?[{type:"keyword",value:"DATABASE"},{type:"keyword",value:"SCHEMA"},{type:"keyword",value:"PROCEDURE"}]:[],{type:"keyword",value:"TABLE"},{type:"keyword",value:"VIEW"},{type:"keyword",value:"TRIGGER"},{type:"keyword",value:"FUNCTION"},{type:"keyword",value:"INDEX"}]},add:e=>{t.type=`DROP_${e.value.toUpperCase()}`},postCanGoToNext:()=>!0}];return d(t,n,e)}(n);case"ALTER":return function(e){const t={start:-1,end:0,parameters:[],tables:[]},n=[{preCanGoToNext:()=>!1,validation:{acceptTokens:[{type:"keyword",value:"ALTER"}]},add:e=>{t.start<0&&(t.start=e.start)},postCanGoToNext:()=>!0},{preCanGoToNext:()=>!1,validation:{requireBefore:["whitespace"],acceptTokens:[..."sqlite"!==e.dialect?[{type:"keyword",value:"DATABASE"},{type:"keyword",value:"SCHEMA"},{type:"keyword",value:"TRIGGER"},{type:"keyword",value:"FUNCTION"},{type:"keyword",value:"INDEX"},..."bigquery"!==e.dialect?[{type:"keyword",value:"PROCEDURE"}]:[]]:[],{type:"keyword",value:"TABLE"},{type:"keyword",value:"VIEW"}]},add:e=>{t.type=`ALTER_${e.value.toUpperCase()}`},postCanGoToNext:()=>!0}];return d(t,n,e)}(n);case"INSERT":return function(e){const t={start:-1,end:0,parameters:[],tables:[]},n=[{preCanGoToNext:()=>!1,validation:{acceptTokens:[{type:"keyword",value:"INSERT"}]},add:e=>{t.type="INSERT",t.start<0&&(t.start=e.start)},postCanGoToNext:()=>!0}];return d(t,n,e)}(n);case"UPDATE":return function(e){const t={start:-1,end:0,parameters:[],tables:[]},n=[{preCanGoToNext:()=>!1,validation:{acceptTokens:[{type:"keyword",value:"UPDATE"}]},add:e=>{t.type="UPDATE",t.start<0&&(t.start=e.start)},postCanGoToNext:()=>!0}];return d(t,n,e)}(n);case"DELETE":return function(e){const t={start:-1,end:0,parameters:[],tables:[]},n=[{preCanGoToNext:()=>!1,validation:{acceptTokens:[{type:"keyword",value:"DELETE"}]},add:e=>{t.type="DELETE",t.start<0&&(t.start=e.start)},postCanGoToNext:()=>!0}];return d(t,n,e)}(n);case"TRUNCATE":return function(e){const t={start:-1,end:0,parameters:[],tables:[]},n=[{preCanGoToNext:()=>!1,validation:{acceptTokens:[{type:"keyword",value:"TRUNCATE"}]},add:e=>{t.type="TRUNCATE",t.start<0&&(t.start=e.start)},postCanGoToNext:()=>!0}];return d(t,n,e)}(n);case"BEGIN":if(["bigquery","oracle"].includes(n.dialect)&&"TRANSACTION"!==t.value)return p(n);break;case"DECLARE":if("oracle"===n.dialect)return p(n)}if(!n.isStrict)return function(e){const t={start:-1,end:0,parameters:[],tables:[]},n=[{preCanGoToNext:()=>!1,add:e=>{t.type="UNKNOWN",t.start<0&&(t.start=e.start)},postCanGoToNext:()=>!0}];return d(t,n,e)}(n);throw new Error(`Invalid statement parser "${e.value}"`)}function p(e){const t={start:-1,end:0,parameters:[],tables:[],type:"ANON_BLOCK"},n=[{preCanGoToNext:()=>!1,validation:{acceptTokens:[..."oracle"===e.dialect?[{type:"keyword",value:"DECLARE"}]:[],{type:"keyword",value:"BEGIN"}]},add:e=>{t.start<0&&(t.start=e.start)},postCanGoToNext:()=>!0}];return d(t,n,e)}function d(e,n,{isStrict:r,dialect:i,identifyTables:u}){let l,p,d,E=0,T=!1,I=0;const c=e=>{l=e,"whitespace"!==e.type&&(p=e)};return{getStatement:()=>e,addToken(y,N){var v;if(e.endStatement)throw new Error("This statement has already got to the end.");if(e.type&&"semicolon"===y.type&&(!a.includes(e.type)||0===I&&("UNKNOWN"===e.type||e.canEnd)))return void(e.endStatement=";");if(I>0&&"END"===y.value.toUpperCase())return I--,0===I&&(e.canEnd=!0),void c(y);if("whitespace"===y.type)return void c(y);if("keyword"===y.type&&s[i].includes(y.value.toUpperCase())&&"END"!==(null==p?void 0:p.value.toUpperCase())&&("BEGIN"!==y.value.toUpperCase()||"BEGIN"===y.value.toUpperCase()&&"TRANSACTION"!==N.value.toUpperCase()&&("sqlite"!==i||"sqlite"===i&&!["DEFERRED","IMMEDIATE","EXCLUSIVE"].includes(N.value.toUpperCase())))){if("oracle"===i&&"DECLARE"===(null==d?void 0:d.value)&&"BEGIN"===y.value.toUpperCase())return c(y),void(d=y);if(I++,d=y,c(y),"ANON_BLOCK"!==e.type||T){if(e.type)return}else T=!0}if(u&&o.exec(y.value)&&!e.isCte&&(null===(v=e.type)||void 0===v?void 0:v.match(/SELECT|INSERT/))){const t=N.value;e.tables.includes(t)||e.tables.push(t)}if("parameter"!==y.type||"?"!==y.value&&e.parameters.includes(y.value)||e.parameters.push(y.value),e.type&&e.start>=0)return void c(y);if("UNIQUE"===y.value.toUpperCase()||"mysql"===i&&["FULLTEXT","SPATIAL"].includes(y.value.toUpperCase())||"mssql"===i&&["CLUSTERED","NONCLUSTERED"].includes(y.value.toUpperCase()))return void c(y);if(["psql","mssql","bigquery"].includes(i)&&"MATERIALIZED"===y.value.toUpperCase())return void c(y);if("sqlite"!==i&&("OR"===y.value.toUpperCase()||"OR"===(null==p?void 0:p.value.toUpperCase())&&y.value.toUpperCase()===("mssql"===i?"ALTER":"REPLACE")))return void c(y);if("psql"===i&&["TEMP","TEMPORARY"].includes(y.value.toUpperCase())||"sqlite"===i&&["TEMP","TEMPORARY","VIRTUAL"].includes(y.value.toUpperCase()))return void c(y);if("mysql"===i&&"DEFINER"===y.value.toUpperCase())return e.definer=0,void c(y);if(0===e.definer&&"="===y.value)return e.definer++,void c(y);if(void 0!==e.definer&&e.definer>0){if(1===e.definer&&"whitespace"===(null==l?void 0:l.type))return e.definer++,void c(y);if(e.definer>1&&"whitespace"!==(null==l?void 0:l.type))return void c(y);delete e.definer}if("mysql"===i&&"ALGORITHM"===y.value.toUpperCase())return e.algorithm=0,void c(y);if(0===e.algorithm&&"="===y.value)return e.algorithm++,void c(y);if(void 0!==e.algorithm&&e.algorithm>0){if(1===e.algorithm&&"whitespace"===(null==l?void 0:l.type))return e.algorithm++,void c(y);if(e.algorithm>1&&l&&["UNDEFINED","MERGE","TEMPTABLE"].includes(l.value.toUpperCase()))return void c(y);delete e.algorithm}if("mysql"===i&&"SQL"===y.value.toUpperCase())return e.sqlSecurity=0,void c(y);if(void 0!==e.sqlSecurity){if(0===e.sqlSecurity&&"SECURITY"===y.value.toUpperCase()||1===e.sqlSecurity&&["DEFINER","INVOKER"].includes(y.value.toUpperCase()))return e.sqlSecurity++,void c(y);2===e.sqlSecurity&&delete e.sqlSecurity}let S=n[E];if(S.preCanGoToNext(y)&&(E++,S=n[E]),l&&S.validation&&S.validation.requireBefore&&!S.validation.requireBefore.includes(l.type)){const e=S.validation.requireBefore.join(" or ");throw new Error(`Expected any of these tokens ${e} before "${y.value}" (currentStep=${E}).`)}if(!((e,t)=>!e.validation||e.validation.acceptTokens.filter((e=>{const n=t.type===e.type,r=!e.value||t.value.toUpperCase()===e.value;return n&&r})).length>0)(S,y)&&r){const e=S.validation?S.validation.acceptTokens.map((e=>`(type="${e.type}" value="${e.value}")`)).join(" or "):"()";throw new Error(`Expected any of these tokens ${e} instead of type="${y.type}" value="${y.value}" (currentStep=${E}).`)}S.add(y),e.executionType=e.type&&t.EXECUTION_TYPES[e.type]?t.EXECUTION_TYPES[e.type]:"UNKNOWN",S.postCanGoToNext(y)&&E++,c(y)}}}t.parse=function(e,t=!0,n="generic",a=!1,o){const s=u({input:e}),p={type:"QUERY",start:0,end:e.length-1,body:[],tokens:[]};let d=s,E=null;const T={isCte:!1,asSeen:!1,statementEnd:!1,parens:0,state:s,params:[]},I=["whitespace","comment-inline","comment-block","semicolon"];for(;d.position<s.end;){const e=u({prevState:d}),s=(0,r.scanToken)(e,n,o),c=i(e,n);if(E){E.addToken(s,c),p.tokens.push(s),d=e;const t=E.getStatement();t.endStatement&&(t.end=s.end,p.body.push(t),E=null)}else!T.isCte&&I.includes(s.type)?(p.tokens.push(s),d=e):T.isCte||"keyword"!==s.type||"WITH"!==s.value.toUpperCase()?T.isCte&&"semicolon"===s.type?(p.tokens.push(s),d=e,p.body.push({start:T.state.start,end:s.end,type:"UNKNOWN",executionType:"UNKNOWN",parameters:[],tables:[]}),T.isCte=!1,T.asSeen=!1,T.statementEnd=!1,T.parens=0):T.isCte&&!T.statementEnd?(T.asSeen?"("===s.value?T.parens++:")"===s.value&&(T.parens--,0===T.parens&&(T.statementEnd=!0)):"AS"===s.value.toUpperCase()&&(T.asSeen=!0),p.tokens.push(s),d=e):T.isCte&&T.statementEnd&&","===s.value?(T.asSeen=!1,T.statementEnd=!1,p.tokens.push(s),d=e):T.isCte&&T.statementEnd&&I.includes(s.type)?(p.tokens.push(s),d=e):(E=l(s,c,{isStrict:t,dialect:n,identifyTables:a}),T.isCte&&(E.getStatement().start=T.state.start,E.getStatement().isCte=!0,E.getStatement().parameters.push(...T.params),T.params=[],T.isCte=!1,T.asSeen=!1,T.statementEnd=!1)):(T.isCte=!0,p.tokens.push(s),T.state=e,d=e),T.isCte&&"parameter"===s.type&&T.params.push(s.value)}if(E){const e=E.getStatement();e.endStatement||(e.end=p.end,p.body.push(e))}return p},t.defaultParamTypesFor=function(e){switch(e){case"psql":return{numbered:["$"]};case"mssql":return{named:[":"]};case"bigquery":return{positional:!0,named:["@"],quoted:["@"]};case"sqlite":return{positional:!0,numbered:["?"],named:[":","@"]};default:return{positional:!0}}}},429:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.scanToken=void 0;const n=["SELECT","INSERT","DELETE","UPDATE","CREATE","DROP","DATABASE","SCHEMA","TABLE","VIEW","TRIGGER","FUNCTION","INDEX","ALTER","TRUNCATE","WITH","AS","MATERIALIZED","BEGIN","DECLARE","CASE","LOOP","IF","REPEAT","WHILE","FOR","PROCEDURE","SHOW","DATABASES","KEYS","TABLES","COLUMNS","STATUS","BINARY","BINLOG","CHARACTER","COLLATION","ENGINE","ENGINES","ERRORS","EVENTS","GRANTS","MASTER","OPEN","PLUGINS","PRIVILEGES","PROCESSLIST","PROFILE","PROFILES","RELAYLOG","REPLICAS","SLAVE","REPLICA","TRIGGERS","VARIABLES","WARNINGS"],r={";":"semicolon"},a={'"':'"',"'":"'","`":"`","[":"]"};function o(e,t=0){return e.position+t===e.input.length-1?null:(e.position+=1+t,e.input[e.position])}function s(e){e.position!==e.start&&e.position--}function i(e){return e.position>=e.input.length-1?null:e.input[e.position+1]}function u(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function l(e){return null!==e&&/\w/.test(e)}function p(e,t){return("mssql"===t?['"',"["]:['"',"`"]).includes(e)}function d(e){return null!==e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"_"===e)}t.scanToken=function(e,t="generic",E={positional:!0}){const T=o(e);if(u(T))return function(e){let t;do{t=o(e)}while(u(t));null===t||u(t)||s(e);const n=e.input.slice(e.start,e.position+1);return{type:"whitespace",value:n,start:e.start,end:e.start+n.length-1}}(e);if(function(e,t){let n="-"===e;if(!n)return!1;const r=o(t);n="-"===r,n||s(t);return n}(T,e))return function(e){let t;do{t=o(e)}while("\n"!==t&&null!==t);null!==t&&"\n"!==t&&s(e);const n=e.input.slice(e.start,e.position+1);return{type:"comment-inline",value:n,start:e.start,end:e.start+n.length-1}}(e);if(function(e,t){let n="/"===e;if(!n)return!1;const r=o(t);n="*"===r,n||s(t);return n}(T,e))return function(e){let t,n="";do{t=n,n=o(e)}while((t||"")+(n||"")!=="*/"&&null!==n);null!==n&&"/"!==n&&s(e);const r=e.input.slice(e.start,e.position+1);return{type:"comment-block",value:r,start:e.start,end:e.start+r.length-1}}(e);if(function(e,t){const n="mysql"===t?["'",'"']:["'"];return n.includes(e)}(T,t)&&null!==T)return function(e,t){let n;do{n=o(e),n===t&&i(e)===t&&(n=o(e,1))}while(n!==t&&null!==n);null!==n&&t!==n&&s(e);const r=e.input.slice(e.start,e.position+1);return{type:"string",value:r,start:e.start,end:e.start+r.length-1}}(e,a[T]);if(function(e,t,n){var r,a,o,s;if(!e)return!1;const u=i(t),l=function(e){if(0==e.position)return null;return e.input[e.position-1]}(t);if(":"===e&&(":"===l||":"===u))return!1;if(n.positional&&"?"===e)return!0;if((null===(r=n.numbered)||void 0===r?void 0:r.length)&&n.numbered.some((t=>e===t))&&null!==u&&!isNaN(Number(u)))return!0;if((null===(a=n.named)||void 0===a?void 0:a.length)&&n.named.some((t=>t===e))||(null===(o=n.quoted)||void 0===o?void 0:o.length)&&n.quoted.some((t=>t===e)))return!0;if((null===(s=n.custom)||void 0===s?void 0:s.length)&&function(e,t){return t.some((t=>new RegExp(`^(?:${t})`,"uy").test(e.input.slice(e.start))))}(t,n.custom))return!0;return!1}(T,e,E))return function(e,t,n){var r,d,E;const T=e.input[e.start],I=i(e);let c=!1;if((null===(r=n.numbered)||void 0===r?void 0:r.length)&&n.numbered.some((e=>e===T))){const t=e.input.slice(e.start+1).split("").findIndex((e=>/^\W+/.test(e))),n=e.input.slice(e.start+1,t>0?e.start+t+1:e.end+1);if(null!==I&&!isNaN(Number(I))&&/^\d+$/.test(n)){let t=null;do{t=o(e)}while(null!==t&&!isNaN(Number(t))&&!u(t));null!==t&&s(e),c=!0}}if(!c&&(null===(d=n.named)||void 0===d?void 0:d.length)&&n.named.some((e=>e===T))&&!p(I,t)){for(;l(i(e));)o(e);c=!0}if(!c&&(null===(E=n.quoted)||void 0===E?void 0:E.length)&&n.quoted.some((e=>e===T))&&p(I,t)){const t=o(e);for(;(l(i(e))||" "===i(e))&&i(e)!=a[t];)o(e);o(e),c=!0}if(!c&&n.custom&&n.custom.length){const t=function(e,t){var n;const r=null===(n=null==t?void 0:t.custom)||void 0===n?void 0:n.map((t=>new RegExp(`^(?:${t})`,"u").exec(e.input.slice(e.start)))).filter((e=>!!e))[0];return r?r[0]:null}(e,n);t&&(o(e,t.length),c=!0)}const y=e.input.slice(e.start,e.position+1);if(!c&&!n.positional&&"?"!==T)return{type:"unknown",value:y,start:e.start,end:e.start+y.length-1};return{type:"parameter",value:y,start:e.start,end:e.start+y.length-1}}(e,t,E);if(function(e){return null!==/^\$[\w]*\$/.exec(e.input.slice(e.start))}(e))return function(e){const t=/^(\$[a-zA-Z0-9_]*\$)/.exec(e.input.slice(e.start));if(!t)throw new Error("Could not find dollar quoted string opener");const n=t[1];for(let t=0;t<n.length-1;t++)o(e);let r="";for(;e.input.slice(e.position,e.position+n.length)!==n&&null!==r;){do{r=o(e)}while("$"!==r&&null!==r);"$"!==r&&null!==r&&s(e)}for(let t=0;t<n.length-1;t++)o(e);const a=e.input.slice(e.start,e.position+1);return{type:"string",value:a,start:e.start,end:e.start+a.length-1}}(e);if(p(T,t)&&null!==T)return function(e,t){let n;do{n=o(e)}while(t!==n&&null!==n);null!==n&&t!==n&&s(e);const r=e.input.slice(e.start,e.position+1);return{type:"keyword",value:r,start:e.start,end:e.start+r.length-1}}(e,a[T]);if(d(T))return function(e){let t;do{t=o(e)}while(d(t));null===t||d(t)||s(e);const r=e.input.slice(e.start,e.position+1);if(a=r,!n.includes(a.toUpperCase()))return function(e,t){return{type:"unknown",value:t,start:e.start,end:e.start+t.length-1}}(e,r);var a;return{type:"keyword",value:r,start:e.start,end:e.start+r.length-1}}(e);const I=function(e){const t=e.input.slice(e.start,e.position+1),n=function(e){return r[e]}(t);if(!n)return null;return{type:n,value:t,start:e.start,end:e.start+t.length-1}}(e);return I||function(e){return{type:"unknown",value:e.input.slice(e.start,e.position+1),start:e.start,end:e.start}}(e)}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.getExecutionType=e.identify=void 0;const t=n(337),a=n(996);e.identify=function(e,n={}){const r=void 0===n.strict||!0===n.strict,o=void 0===n.dialect?"generic":n.dialect;if(!a.DIALECTS.includes(o))throw new Error(`Unknown dialect. Allowed values: ${a.DIALECTS.join(", ")}`);const s=n.paramTypes||(0,t.defaultParamTypesFor)(o),i=(0,t.parse)(e,r,o,n.identifyTables,s),u="psql"===o&&!n.paramTypes;return i.body.map((t=>({start:t.start,end:t.end,text:e.substring(t.start,t.end+1),type:t.type,executionType:t.executionType,parameters:u?t.parameters.sort():t.parameters,tables:t.tables||[]})))},e.getExecutionType=function(e){return t.EXECUTION_TYPES[e]||"UNKNOWN"}})(),r})()));